diff --git a/meson.build b/meson.build
index c364a9e..adcb08a 100644
--- a/meson.build
+++ b/meson.build
@@ -38,6 +38,10 @@ endif
 nlohmann_json_dep = dependency('nlohmann_json', include_type: 'system')
 sdbusplus = dependency('sdbusplus')
 phosphor_logging_dep = dependency('phosphor-logging')
+fmt_dep = dependency('fmt', required: false)
+if not fmt_dep.found()
+    fmt_dep = cpp.find_library('fmt', required: true)
+endif
 zlib_dep = dependency('zlib', include_type: 'system')
 libxml2_dep = dependency('libxml-2.0', include_type: 'system')
 
diff --git a/src/entity_manager/meson.build b/src/entity_manager/meson.build
index 1fe9b08..217f7aa 100644
--- a/src/entity_manager/meson.build
+++ b/src/entity_manager/meson.build
@@ -9,7 +9,7 @@ endif
 allowed = get_option('new-device-detection')
 cpp_args_em += '-DEM_CACHE_CONFIGURATION=' + allowed.to_string()
 
-em_deps = [boost, nlohmann_json_dep, phosphor_logging_dep, sdbusplus, valijson]
+em_deps = [boost, nlohmann_json_dep, phosphor_logging_dep, sdbusplus, valijson, fmt_dep]
 
 entity_manager_lib = static_library(
     'entity-manager',
diff --git a/src/entity_manager/power_status_monitor.cpp b/src/entity_manager/power_status_monitor.cpp
index 079c320..7b69cde 100644
--- a/src/entity_manager/power_status_monitor.cpp
+++ b/src/entity_manager/power_status_monitor.cpp
@@ -35,13 +35,13 @@ bool PowerStatusMonitor::isPowerOn() const
 {
     return powerStatusOn;
 }
-
+#include <boost/container/flat_map.hpp>
 void PowerStatusMonitor::handlePowerMatch(sdbusplus::message_t& message)
 {
     lg2::debug("power match triggered");
 
     std::string objectName;
-    std::flat_map<std::string, std::variant<std::string>> values;
+    boost::container::flat_map<std::string, std::variant<std::string>> values;
     message.read(objectName, values);
     auto findState = values.find(power::property);
     if (findState != values.end())
diff --git a/src/entity_manager/topology.cpp b/src/entity_manager/topology.cpp
index bac8654..1a03f14 100644
--- a/src/entity_manager/topology.cpp
+++ b/src/entity_manager/topology.cpp
@@ -1,5 +1,5 @@
 #include "topology.hpp"
-
+#include <algorithm>
 #include "phosphor-logging/lg2.hpp"
 
 const AssocName assocContaining =
@@ -170,7 +170,7 @@ std::unordered_map<std::string, std::set<Association>> Topology::getAssocs(
 
     for (const auto& [boardPath, probePaths] : probePaths)
     {
-        if (std::ranges::contains(boardPaths, boardPath))
+        if (std::ranges::find(boardPaths, boardPath) != std::ranges::end(boardPaths))
         {
             for (const auto& path : probePaths)
             {
@@ -228,7 +228,7 @@ void Topology::fillAssocForPortId(
         return;
     }
     // The downstream path must be one we care about.
-    if (!std::ranges::contains(boardPaths, upstream))
+    if (std::ranges::find(boardPaths, upstream) == std::ranges::end(boardPaths))
     {
         return;
     }
diff --git a/src/fru_device/fru_device.cpp b/src/fru_device/fru_device.cpp
index 3d806a2..3a17ad9 100644
--- a/src/fru_device/fru_device.cpp
+++ b/src/fru_device/fru_device.cpp
@@ -231,7 +231,7 @@ static int64_t readData(bool is16bit, bool isBytewise, int file,
                 file, static_cast<uint8_t>(offset), len, buf);
         }
 
-        std::span<uint8_t> bufspan{buf, len};
+        gsl::span<uint8_t> bufspan{buf, len};
         for (size_t i = 0; i < len; i++)
         {
             int byte = i2c_smbus_read_byte_data(
@@ -458,7 +458,7 @@ int getBusFRUs(int file, int first, int last, int bus,
         std::set<size_t>& foundItems = fruAddresses[bus];
         foundItems.clear();
 
-        skipList.insert_range(addressBlocklist);
+        skipList.insert(addressBlocklist.begin(), addressBlocklist.end());
 
         auto busFind = busBlocklist.find(bus);
         if (busFind != busBlocklist.end())
diff --git a/src/fru_device/fru_utils.cpp b/src/fru_device/fru_utils.cpp
index efb4ec1..09f0559 100644
--- a/src/fru_device/fru_utils.cpp
+++ b/src/fru_device/fru_utils.cpp
@@ -4,9 +4,9 @@
 #include "fru_utils.hpp"
 
 #include "gzip_utils.hpp"
-
+#include <algorithm>
 #include <phosphor-logging/lg2.hpp>
-
+#include <gsl/gsl>
 #include <array>
 #include <cstddef>
 #include <cstdint>
@@ -87,8 +87,8 @@ enum SubManagementAccessRecord : uint8_t
  * iterator is no longer usable.
  */
 std::pair<DecodeState, std::string> decodeFRUData(
-    std::span<const uint8_t>::const_iterator& iter,
-    std::span<const uint8_t>::const_iterator& end, bool isLangEng)
+    gsl::span<const uint8_t>::iterator& iter,
+    gsl::span<const uint8_t>::iterator& end, bool isLangEng)
 {
     std::string value;
     unsigned int i = 0;
@@ -210,7 +210,7 @@ bool checkLangEng(uint8_t lang)
  * len:         Length of current area space and it is a multiple of 8 bytes
  *              as per specification
  */
-bool verifyOffset(std::span<const uint8_t> fruBytes, fruAreas currentArea,
+bool verifyOffset(gsl::span<const uint8_t> fruBytes, fruAreas currentArea,
                   uint8_t len)
 {
     unsigned int fruBytesSize = fruBytes.size();
@@ -276,7 +276,7 @@ bool verifyOffset(std::span<const uint8_t> fruBytes, fruAreas currentArea,
 }
 
 static void parseMultirecordUUID(
-    std::span<const uint8_t> device,
+    gsl::span<const uint8_t> device,
     boost::container::flat_map<std::string, std::string>& result)
 {
     constexpr size_t uuidDataLen = 16;
@@ -303,7 +303,7 @@ static void parseMultirecordUUID(
     }
 
     areaOffset *= fruBlockSize;
-    std::span<const uint8_t>::const_iterator fruBytesIter =
+    gsl::span<const uint8_t>::iterator fruBytesIter =
         device.begin() + areaOffset;
 
     /* Verify area offset */
@@ -360,8 +360,8 @@ static void parseMultirecordUUID(
 }
 
 resCodes decodeField(
-    std::span<const uint8_t>::const_iterator& fruBytesIter,
-    std::span<const uint8_t>::const_iterator& fruBytesIterEndArea,
+    gsl::span<const uint8_t>::iterator& fruBytesIter,
+    gsl::span<const uint8_t>::iterator& fruBytesIterEndArea,
     const std::vector<std::string>& fruAreaFieldNames, size_t& fieldIndex,
     DecodeState& state, bool isLangEng, const fruAreas& area,
     boost::container::flat_map<std::string, std::string>& result)
@@ -431,7 +431,7 @@ resCodes decodeField(
 }
 
 resCodes formatIPMIFRU(
-    std::span<const uint8_t> fruBytes,
+    gsl::span<const uint8_t> fruBytes,
     boost::container::flat_map<std::string, std::string>& result)
 {
     resCodes ret = resCodes::resOK;
@@ -455,7 +455,7 @@ resCodes formatIPMIFRU(
             continue;
         }
         offset *= fruBlockSize;
-        std::span<const uint8_t>::const_iterator fruBytesIter =
+        gsl::span<const uint8_t>::iterator fruBytesIter =
             fruBytes.begin() + offset;
         if (fruBytesIter + fruBlockSize >= fruBytes.end())
         {
@@ -480,7 +480,7 @@ resCodes formatIPMIFRU(
         }
 
         size_t fruAreaSize = *fruBytesIter * fruBlockSize;
-        std::span<const uint8_t>::const_iterator fruBytesIterEndArea =
+        gsl::span<const uint8_t>::iterator fruBytesIterEndArea =
             fruBytes.begin() + offset + fruAreaSize - 1;
         ++fruBytesIter;
 
@@ -600,15 +600,15 @@ resCodes formatIPMIFRU(
 }
 
 // Calculate new checksum for fru info area
-uint8_t calculateChecksum(std::span<const uint8_t>::const_iterator iter,
-                          std::span<const uint8_t>::const_iterator end)
+uint8_t calculateChecksum(gsl::span<const uint8_t>::iterator iter,
+                          gsl::span<const uint8_t>::iterator end)
 {
     constexpr int checksumMod = 256;
     uint8_t sum = std::accumulate(iter, end, static_cast<uint8_t>(0));
     return (checksumMod - sum) % checksumMod;
 }
 
-uint8_t calculateChecksum(std::span<const uint8_t> fruAreaData)
+uint8_t calculateChecksum(gsl::span<const uint8_t> fruAreaData)
 {
     return calculateChecksum(fruAreaData.begin(), fruAreaData.end());
 }
@@ -998,8 +998,8 @@ static bool updateHeaderChecksum(std::vector<uint8_t>& fruData)
     }
 
     uint8_t& checksumInBytes = fruData[7];
-    uint8_t checksum =
-        calculateChecksum({fruData.begin(), fruData.begin() + 7});
+    gsl::span<const uint8_t> headerSpan(fruData.data(), 7);
+    uint8_t checksum = calculateChecksum(headerSpan);
     std::swap(checksumInBytes, checksum);
 
     if (checksumInBytes != checksum)
@@ -1043,7 +1043,7 @@ bool updateAreaChecksum(std::vector<uint8_t>& fruArea)
 }
 
 static std::optional<size_t> calculateAreaSize(
-    fruAreas area, std::span<const uint8_t> fruData, size_t areaOffset)
+    fruAreas area, gsl::span<const uint8_t> fruData, size_t areaOffset)
 {
     switch (area)
     {
@@ -1232,7 +1232,7 @@ static std::optional<FieldInfo> findOrCreateField(
                      static_cast<size_t>(fieldIndex)};
 }
 
-static std::optional<size_t> findEndOfFieldMarker(std::span<uint8_t> bytes)
+static std::optional<size_t> findEndOfFieldMarker(gsl::span<uint8_t> bytes)
 {
     // we're skipping the checksum
     // this function assumes a properly sized and formatted area
@@ -1247,7 +1247,7 @@ static std::optional<size_t> findEndOfFieldMarker(std::span<uint8_t> bytes)
     return std::nullopt;
 }
 
-static std::optional<size_t> getNonPaddedSizeOfArea(std::span<uint8_t> bytes)
+static std::optional<size_t> getNonPaddedSizeOfArea(gsl::span<uint8_t> bytes)
 {
     if (auto endOfFields = findEndOfFieldMarker(bytes))
     {
@@ -1288,7 +1288,7 @@ bool setField(const fruAreas& fruAreaToUpdate, std::vector<uint8_t>& areaData,
     tmpBuffer.erase(fieldIt, fieldIt + fieldInfo->length + 1);
     // Insert the new field value
     tmpBuffer.insert(fieldIt, 0xc0 | value.size());
-    tmpBuffer.insert_range(fieldIt + 1, value);
+    tmpBuffer.insert(fieldIt + 1, value.begin(), value.end());
 
     auto newSize = getNonPaddedSizeOfArea(tmpBuffer);
     auto oldSize = getNonPaddedSizeOfArea(areaData);
@@ -1368,7 +1368,7 @@ bool assembleFruData(std::vector<uint8_t>& fruData,
 
         // Set the area offset in the header
         fruData[getHeaderAreaFieldOffset(area)] = writeOffset / fruBlockSize;
-        fruData.append_range(areaBytes);
+        fruData.insert(fruData.end(), areaBytes.begin(), areaBytes.end());
         writeOffset += areaBytes.size();
     }
 
@@ -1732,7 +1732,7 @@ bool isFieldEditable(std::string_view fieldName)
     }
 
     // Match against editable fields
-    return std::ranges::contains(editableFields, subField);
+    return std::find(editableFields.begin(), editableFields.end(), subField) != editableFields.end();
 }
 
 bool updateAddProperty(const std::string& propertyValue,
diff --git a/src/fru_device/fru_utils.hpp b/src/fru_device/fru_utils.hpp
index d689d5c..f4deb61 100644
--- a/src/fru_device/fru_utils.hpp
+++ b/src/fru_device/fru_utils.hpp
@@ -6,7 +6,7 @@
 
 #include <boost/container/flat_map.hpp>
 #include <sdbusplus/asio/object_server.hpp>
-
+#include <gsl/gsl>
 #include <cstdint>
 #include <cstdio>
 #include <functional>
@@ -100,25 +100,25 @@ constexpr std::array<char, 6> bcdHighChars = {
 
 char bcdPlusToChar(uint8_t val);
 
-bool verifyOffset(std::span<const uint8_t> fruBytes, fruAreas currentArea,
+bool verifyOffset(gsl::span<const uint8_t> fruBytes, fruAreas currentArea,
                   uint8_t len);
 
 std::pair<DecodeState, std::string> decodeFRUData(
-    std::span<const uint8_t>::const_iterator& iter,
-    std::span<const uint8_t>::const_iterator& end, bool isLangEng);
+    gsl::span<const uint8_t>::iterator& iter,
+    gsl::span<const uint8_t>::iterator& end, bool isLangEng);
 
 bool checkLangEng(uint8_t lang);
 
 resCodes formatIPMIFRU(
-    std::span<const uint8_t> fruBytes,
+    gsl::span<const uint8_t> fruBytes,
     boost::container::flat_map<std::string, std::string>& result);
 
 std::vector<uint8_t>& getFRUInfo(const uint16_t& bus, const uint8_t& address);
 
-uint8_t calculateChecksum(std::span<const uint8_t>::const_iterator iter,
-                          std::span<const uint8_t>::const_iterator end);
+uint8_t calculateChecksum(gsl::span<const uint8_t>::iterator iter,
+                          gsl::span<const uint8_t>::iterator end);
 
-uint8_t calculateChecksum(std::span<const uint8_t> fruAreaData);
+uint8_t calculateChecksum(gsl::span<const uint8_t> fruAreaData);
 
 unsigned int updateFRUAreaLenAndChecksum(
     std::vector<uint8_t>& fruData, size_t fruAreaStart,
diff --git a/src/fru_device/gzip_utils.cpp b/src/fru_device/gzip_utils.cpp
index 430fb91..e64cf6e 100644
--- a/src/fru_device/gzip_utils.cpp
+++ b/src/fru_device/gzip_utils.cpp
@@ -1,5 +1,5 @@
 #include "gzip_utils.hpp"
-
+#include <gsl/gsl>
 #include <libxml/parser.h>
 #include <libxml/xpath.h>
 #include <unistd.h>
@@ -10,7 +10,7 @@
 #include <string>
 #include <vector>
 
-std::optional<std::string> gzipInflate(std::span<uint8_t> compressedBytes)
+std::optional<std::string> gzipInflate(gsl::span<uint8_t> compressedBytes)
 {
     std::string uncompressedBytes;
     if (compressedBytes.empty())
@@ -75,7 +75,7 @@ static std::vector<std::string> xpathText(xmlDocPtr doc, const char* xp)
         {
             xmlNodeSetPtr nodeTab = obj->nodesetval;
             size_t nodeNr = static_cast<size_t>(nodeTab->nodeNr);
-            std::span<xmlNodePtr> nodes{nodeTab->nodeTab, nodeNr};
+            gsl::span<xmlNodePtr> nodes{nodeTab->nodeTab, nodeNr};
             for (xmlNodePtr node : nodes)
             {
                 unsigned char* keyword = xmlNodeGetContent(node);
diff --git a/src/fru_device/gzip_utils.hpp b/src/fru_device/gzip_utils.hpp
index db94a89..be5a169 100644
--- a/src/fru_device/gzip_utils.hpp
+++ b/src/fru_device/gzip_utils.hpp
@@ -2,7 +2,7 @@
 // SPDX-FileCopyrightText: Copyright 2018 Intel Corporation
 
 #pragma once
-
+#include <gsl/gsl>
 #include <array>
 #include <cstdint>
 #include <optional>
@@ -10,7 +10,7 @@
 #include <string>
 #include <vector>
 
-std::optional<std::string> gzipInflate(std::span<uint8_t> compressedBytes);
+std::optional<std::string> gzipInflate(gsl::span<uint8_t> compressedBytes);
 
 std::vector<std::string> getNodeFromXml(std::string_view xml,
                                         const char* nodeName);
diff --git a/src/fru_device/meson.build b/src/fru_device/meson.build
index b99d0d8..f6f142f 100644
--- a/src/fru_device/meson.build
+++ b/src/fru_device/meson.build
@@ -19,6 +19,7 @@ executable(
     cpp_args: cpp_args_fd,
     dependencies: [
         boost,
+        fmt_dep,
         i2c,
         libxml2_dep,
         nlohmann_json_dep,
diff --git a/src/gpio-presence/config_provider.cpp b/src/gpio-presence/config_provider.cpp
index 2f522b4..eb89be3 100644
--- a/src/gpio-presence/config_provider.cpp
+++ b/src/gpio-presence/config_provider.cpp
@@ -9,7 +9,7 @@
 #include <sdbusplus/async/match.hpp>
 #include <sdbusplus/bus/match.hpp>
 #include <xyz/openbmc_project/ObjectMapper/client.hpp>
-
+#include <algorithm>
 #include <ranges>
 #include <string>
 
@@ -105,7 +105,8 @@ auto ConfigProvider::handleInterfacesAdded(AddedCallback addConfig)
 
         debug("Detected interface added on {OBJPATH}", "OBJPATH", objPath);
 
-        if (!std::ranges::contains(std::views::keys(intfMap), interface))
+        auto keysView = std::views::keys(intfMap);
+        if (std::ranges::find(keysView, interface) == std::ranges::end(keysView))
         {
             continue;
         }
@@ -135,7 +136,7 @@ auto ConfigProvider::handleInterfacesRemoved(RemovedCallback removeConfig)
                                               std::vector<std::string>>();
         auto [objectPath, interfaces] = std::move(tmp);
 
-        if (!std::ranges::contains(interfaces, interface))
+        if (std::ranges::find(interfaces, interface) == std::ranges::end(interfaces))
         {
             continue;
         }
diff --git a/test/test_fru-utils.cpp b/test/test_fru-utils.cpp
index f925db2..3e5cc21 100644
--- a/test/test_fru-utils.cpp
+++ b/test/test_fru-utils.cpp
@@ -1,5 +1,5 @@
 #include "fru_device/fru_utils.hpp"
-
+#include <gsl/gsl>
 #include <algorithm>
 #include <array>
 #include <iterator>
@@ -151,7 +151,7 @@ TEST(VerifyChecksumTest, WrapBoundaryHigh)
     EXPECT_EQ(calculateChecksum(data), 255);
 }
 
-int64_t getDataTempl(std::span<const uint8_t> data, off_t offset, size_t length,
+int64_t getDataTempl(gsl::span<const uint8_t> data, off_t offset, size_t length,
                      uint8_t* outBuf)
 {
     if (offset >= static_cast<off_t>(data.size()))
